@model LAPTOP.Models.SanPham

@{
    var giaHienThi = Model.GiaKhuyenMai.HasValue && Model.GiaKhuyenMai > 0 ? Model.GiaKhuyenMai.Value : Model.Gia ?? 0;
    var discount = (Model.GiaKhuyenMai.HasValue && Model.GiaKhuyenMai < Model.Gia)
        ? Math.Round((double)((Model.Gia.Value - Model.GiaKhuyenMai.Value) / Model.Gia.Value * 100))
        : 0;
}

<div class="col">
    <div class="card h-100 border-0 shadow-sm hover-lift position-relative">
        @if (discount > 0)
        {
            <span class="position-absolute top-0 start-0 bg-danger text-white px-3 py-1 small fw-bold">-@discount%</span>
        }
        @if (Model.IsFeatured)
        {
            <span class="position-absolute top-0 end-0 bg-warning text-dark px-3 py-1 small fw-bold">NỔI BẬT</span>
        }

        <img src="@Model.HinhAnh" class="card-img-top p-4 bg-light" style="height: 200px; object-fit: contain;">

        <div class="card-body text-center d-flex flex-column justify-content-between">
            <h6 class="fw-bold" style="height: 50px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                @Model.TenSp
            </h6>
            <p class="text-danger fw-bold fs-5 mb-1">@string.Format("{0:N0}", giaHienThi) ₫</p>
            @if (discount > 0)
            {
                <p class="text-muted small text-decoration-line-through">@string.Format("{0:N0}", Model.Gia) ₫</p>
            }
            <a asp-controller="GioHang" asp-action="AddToCart" asp-route-id="@Model.MaSp"
               class="btn btn-dark w-100 mt-3">Thêm vào giỏ</a>
        </div>
    </div>
</div>